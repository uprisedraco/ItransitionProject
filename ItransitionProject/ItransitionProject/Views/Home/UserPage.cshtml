@using Microsoft.AspNetCore.Mvc.Localization
@model UserPageViewModel
@inject IViewLocalizer Localizer
@{
	ViewData["Title"] = "UserPage";
	string userPage = Model.Id;
}

<div class="container emp-profile">
	<div class="row">
		<div class="col-md-4">
			<div class="profile-img d-flex justify-content-center">
				<img height="250" width="250" src="https://cdn.pixabay.com/photo/2017/07/18/23/23/user-2517433_960_720.png" alt="" />
			</div>
		</div>
		<div class="col-md-8">
			<div class="mt-4" id="myTabContent">
				<div class="row">
					<div class="col-md-6">
						<label>@Localizer["NameLabel"]</label>
					</div>
					<div class="col-md-6">
						<p>@Model.Name</p>
					</div>
				</div>
				<div class="row">
					<div class="col-md-6">
						<label>Email</label>
					</div>
					<div class="col-md-6">
						<p>@Model.Email</p>
					</div>
				</div>
				<div class="row">
					<div class="col-md-6">
						<label>@Localizer["RegistrationLabel"]</label>
					</div>
					<div class="col-md-6">
						<p>@Model.RegistrationDate</p>
					</div>
				</div>
				<div class="row">
					<div class="col-md-6">
						<label>@Localizer["RoleLabel"]</label>
					</div>
					<div class="col-md-6">
						<p>@Model.Role.ToString()</p>
					</div>
				</div>
				<div class="row">
					<div class="col-md-6">
						<label>@Localizer["StatusLabel"]</label>
					</div>
					<div class="col-md-6">
						<p>@Model.Status.ToString()</p>
					</div>
				</div>
			</div>
		</div>
	</div>

	<div class="album py-3 mt-3">
		<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
			@foreach (var collection in Model.Collections)
			{
				<div class="col">
					<div class="card h-100 shadow-sm">
						@if (collection.FileModel != null)
						{
							<img width="100%" height="100%" @*src="@Url.Content(collection.FileModel.Path)"*@ src="data:image/jpeg;base64,@Convert.ToBase64String(collection.FileModel.Data)">
						}
						else
						{
							<svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false">
								<rect width="100%" height="100%" fill="#55595c"></rect>
							</svg>
						}
						<div class="card-body">
							<p class="card-text">@collection.Name</p>
							<div class="d-flex justify-content-between align-items-center">
								<div class="btn-group">
									<a href="@Url.Action("CollectionPage", "Collection", new { collectionId = collection.Id })" class="btn btn-sm btn-outline-secondary">@Localizer["ViewLabel"]</a>

									@if (User.IsInRole("admin") || User.Identity.Name == Model.Email)
									{
										<a href="@Url.Action("EditCollection", "Collection", new { collectionId = collection.Id })" class="btn btn-sm btn-outline-secondary">@Localizer["EditLabel"]</a>
										<a href="@Url.Action("DeleteCollection", "Collection", new { collectionId = collection.Id })" class="btn btn-sm btn-outline-secondary">@Localizer["DeleteLabel"]</a>
									}

								</div>
								<small class="text-muted">@collection.CollectionType.ToString()</small>
							</div>
						</div>
					</div>
				</div>
			}

			@if (User.IsInRole("admin") || User.Identity.Name == Model.Email)
			{
				<div class="col">
					<a href="@Url.Action("CreateDefaultCollection", "Collection", new { userId = userPage })">
						<div class="card h-100 card-plain border">
							<svg class="bd-placeholder-img card-img-top" width="100%" height="330" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false">
								<text fill="#0074D9" font-size="45" x="45%" y="50%">+</text>
							</svg>
						</div>
					</a>
				</div>
			}
		</div>
	</div>
</div>
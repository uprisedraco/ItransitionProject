@using Microsoft.AspNetCore.Mvc.Localization
@model IndexViewModel
@inject IViewLocalizer Localizer
@{
	ViewData["Title"] = "Home";
}
<div class="container">
	@await Html.PartialAsync("_SetLanguagePartial")
	<div class="album py-3 mt-3">
		<div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
			@foreach (var collection in Model.UserCollections)
			{
				<div class="col">
					<div class="card h-100 shadow-sm">
						@if (collection.FileModel != null)
						{
							<img width="100%" height="100%" @*src="@Url.Content(collection.FileModel.Path)"*@ src="data:image/jpeg;base64,@Convert.ToBase64String(collection.FileModel.Data)">
						}
						else
						{
							<svg class="bd-placeholder-img card-img-top" width="100%" height="225" xmlns="http://www.w3.org/2000/svg" role="img" aria-label="Placeholder: Thumbnail" preserveAspectRatio="xMidYMid slice" focusable="false">
								<rect width="100%" height="100%" fill="#55595c"></rect>
							</svg>
						}
						<div class="card-body">
							<p class="card-text">@collection.Name</p>
							<div class="d-flex justify-content-between align-items-center">
								<div class="btn-group">
									<a href="@Url.Action("CollectionPage", "Collection", new { collectionId = collection.Id })" class="btn btn-sm btn-outline-secondary">@Localizer["ViewLabel"]</a>
								</div>
								<small class="text-muted">@collection.CollectionType.ToString()</small>
							</div>
						</div>
					</div>
				</div>
			}
		</div>
	</div>
	<div class="row">
		@foreach (var item in Model.UserItems)
		{
			<div class="col-sm-2">
				<div class="card h-100">
					<div class="card-body">
						<h5 class="card-title">@item.Name</h5>
						<a href="@Url.Action("ItemPage", "Collection", new { itemId = item.Id })" class="btn btn-primary">@Localizer["ViewLabel"]</a>
					</div>
				</div>
			</div>
		}
	</div>

	<div class="accordion mt-3" id="accordionExample">
		<div class="accordion-item">
			<h2 class="accordion-header" id="headingThree">
				<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
					@Localizer["TagsLabel"]
				</button>
			</h2>
			<div id="collapseThree" class="accordion-collapse collapse" aria-labelledby="headingThree" data-bs-parent="#accordionExample">
				<div class="accordion-body">
					@foreach (var tag in Model.UserTags)
					{
						<a href="@Url.Action("Items", "Collection", new { tagId = tag.Id })"><span class="badge bg-primary">@tag.Tag</span></a>
					}
				</div>
			</div>
		</div>
	</div>

	<div class="accordion mt-3" id="accordionExample">
		<div class="accordion-item">
			<h2 class="accordion-header" id="headingThree">
				<button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseThree">
					@Localizer["SearchLabel"]
				</button>
			</h2>
			<div id="collapseTwo" class="accordion-collapse collapse" aria-labelledby="headingTwo" data-bs-parent="#accordionExample">
				<div class="accordion-body">
					<div class="table-responsive">
						<table class="table">
							<thead>
								<tr>
									<th scope="col">@Localizer["TableSearch"]</th>
									<th scope="col" width="15">@Localizer["TableCount"]</th>
								</tr>
							</thead>
							<tbody>
								@foreach (var search in Model.Searches)
								{
									<tr onclick="location.href='@Url.Action("SearchResults", "Home", new { searchText = search.SearchText })'" >
										<td scope="row">@search.SearchText</td>
										<td>@search.Counter</td>
									</tr>
								}
							</tbody>
						</table>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
